<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script>
  var map;

  function initialize() {
    var mapOptions = {
      zoom: 14
    };
    map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);

    // Try HTML5 geolocation
    if(navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var pos = new google.maps.LatLng(position.coords.latitude,
            position.coords.longitude);

        var infowindow = new google.maps.InfoWindow({
          map: map,
          position: pos,
          content: 'This is where you are, based on HTML5 geolocation tag. This can be pretty off...if we port to full app i can tap into GPS but website can only use html5 which can kind of be off.'
        });

        map.setCenter(pos);
      }, function() {
        handleNoGeolocation(true);
      });
    } else {
      // Browser doesn't support Geolocation
      handleNoGeolocation(false);
    }
  }

  function handleNoGeolocation(errorFlag) {
    if (errorFlag) {
      var content = 'Error: The Geolocation service failed.';
    } else {
      var content = 'Error: Your browser doesn\'t support geolocation.';
    }

    var options = {
      map: map,
      position: new google.maps.LatLng(60, 105),
      content: content
    };

    var infowindow = new google.maps.InfoWindow(options);
    map.setCenter(options.position);
  }

  $(function(){
    $('#myModal').modal({backdrop: 'static', keyboard: false, show: true});
    $('#useGeolocate').click(function(){
      $('#myModal').modal('hide');
      initialize();
    });
  });
</script>
<style>
  html, body, #map-canvas {
    width: 100%;
    height: 100%;
    margin: 0;
  }
</style>



<div id="map-canvas"></div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Set Starting Point (where should we center the map)</h4>
      </div>
      <div class="modal-body">
        <button type="button" id="useGeolocate" class="btn btn-default">Use HTML5 Geolocation</button>
        <button type="button" id="useAddress" class="btn btn-primary">Enter an Address</button>
      </div>
    </div>
  </div>
</div>
