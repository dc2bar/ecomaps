function public_init(){public_initTooltips();public_getPreferences();public_initAccountButtons();public_bindMoblieEvents();public_initFancyInputs();public_initFooterDropUps();public_initSharetns();public_initContactFormBtns();public_overrideColorboxDefaults();public_initFavoriteBtns();document.title=window.PorchLight.PageTitle;IsUndefinedOrNull(LC_API)&&(LC_API.on_after_load=function(){LC_API.on_chat_window_opened=LC_API.hide_eye_catcher})}function IsUndefined(n){return typeof n=="undefined"}function IsUndefinedOrNull(n){return IsUndefined(n)||n==null}function IsString(n){return typeof n=="string"}function IsjQuery(n){return n instanceof jQuery}function IsFunction(n){return!IsUndefinedOrNull(n)||{}.toString.call(n)=="[object Function]"}function numberWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function getQueryStringParams(){for(var t={},n,r=/\+/g,u=/([^&=]+)=?([^&]*)/g,i=function(n){return decodeURIComponent(n.replace(r," "))},f=window.location.search.substring(1);n==u.exec(f);)t[i(n[1])]=i(n[2]);return t}function getRootUrl(){var n=document.location.protocol+"//"+(document.location.hostname||document.location.host);return(document.location.port||!1)&&(n+=":"+document.location.port),n+"/"}function public_getJsonResult(n,t,i,r,u,f,e,o){var s,h;if(IsString(n)&&IsString(t)&&!IsUndefinedOrNull(i)){typeof i=="string"?(s=i,h="application/x-www-form-urlencoded"):(s=JSON.stringify(i),h="application/json; charset=utf-8");var c=f||"POST",l=e||"json",a=o||"html";return $.ajax({url:"/"+n+"/"+t,headers:{JsonDataType:a},data:s,type:c,dataType:l,contentType:h,success:function(i){!IsUndefinedOrNull(i)&&i.hasOwnProperty("RedirectTo")&&!IsUndefinedOrNull(i.RedirectTo)&&i.RedirectTo.length>0?window.setTimeout(function(){window.location=i.RedirectTo},5e3):IsFunction(r)&&r(i,n+"/"+t)},error:function(n,t,i){i!="abort"},complete:function(i,r){IsFunction(u)&&u(i,r,n+"/"+t)}})}}function public_initTooltips(n){var t=n||".tip, .required";$("body").tooltip({selector:t})}function public_pushState(n,t){if(Modernizr.history){var i={newurl:t};window.PorchLight.PopStateReady=!0;$(".updateReturnURL").each(function(){var n=$(this),i=n.data("basehref");n.attr("href",i+t)});history.pushState(i,null,t)}}function public_replaceState(n,t){if(Modernizr.history){var i={newurl:t};history.replaceState(i,null,t)}}function public_setScrolltopButton(n){var t=$('<a href="#" class="scrollTop icon icon-arrow-up-2 tip" data-placement="left" title="Scroll to top"><\/a>');$("body").append(t);t.on("click touchstart",function(n){n.preventDefault();$("body,html").animate({scrollTop:0},250,"easeOutExpo")});$(window).throttleScroll(function(){var i=$(this).scrollTop(),r=n||500;i>=r?t.slideDown(160,"swing"):t.slideUp(160,"swing")})}function public_setDropDownOption(n,t,i){if(!n.hasClass("currentChoice")){var r=n.closest(".dropdown-menu"),u=n.parents(".dropdown").find(".dropdown-toggle");if(n.hasClass("setDefault")){r.find(".default").click();return}u.loadbutton(IsUndefinedOrNull(t)?{}:{loadingText:t});r.find(".currentChoice").removeClass("currentChoice");n.addClass("currentChoice");$.isFunction(i)&&i.call(n,u)}}function public_setPreference(n,t){IsUndefinedOrNull(window.PorchLight.Preferences)||($.extend(!0,window.PorchLight.Preferences,n),Modernizr.localstorage&&localStorage.setItem("PorchLight",JSON.stringify(window.PorchLight.Preferences)),public_getJsonResult("UserPreferences","UpdatePublicPreferences",{preferences:window.PorchLight.Preferences},function(n){$.isFunction(t)&&t(n)},null,null,null,"json"))}function public_getPreferences(){var n,t;window.PorchLight.CurrentUser.isLoggedIn||Modernizr.localstorage&&(n=localStorage.getItem("PorchLight"),IsUndefinedOrNull(n)||(t=JSON.parse(n),n!==JSON.stringify(window.PorchLight.Preferences)&&public_setPreference(t,function(){})))}function public_initFancyInputs(){}function public_clearValidationTooltips(){$(".validity-tooltip").remove()}function public_relatedProperties(n,t,i,r,u){function o(){e=!0;var n={PiS:u,PiO:"porch",PiD:"Descending"};t&&$.extend(n,t);public_getJsonResult("Property","GetSearch",n,function(n){var t=n.Data;f.removeClass("loadingProps");f.append(t.HtmlToAppend);IsUndefinedOrNull(r)||f.find("#pt_"+r).remove();$.isFunction(i)&&i(f)},null,null,null,"json")}var u=u||6,s=$(window),f=n.find(".similarPropsList"),e=!1;o()}function public_initFooterDropUps(){$("body").on("click touchstart",".areaLink",function(n){n.preventDefault();var t=$(this),i=$(t.attr("href"));t.hasClass("activeList")?(t.removeClass("activeList"),i.fadeOut(300)):($(".activeList").removeClass("activeList"),$(".linkWidgetList").hide(),t.addClass("activeList"),i.fadeIn(300))})}function public_overrideColorboxDefaults(){$.fn.colorbox.settings.close="";$.fn.colorbox.settings.initialWidth="60px";$.fn.colorbox.settings.initialHeight="60px";$.fn.colorbox.settings.transition="fade";$.fn.colorbox.settings.speed=300;$("body").on("click touchstart",".closeModal",function(n){n.preventDefault();$.colorbox.close()})}function public_modal(n,t,i,r,u,f,e){r=r||"";var o='<div class="modal '+r+'" tabindex="-1">';o+='<div class="modal-header">';o+='<h3 class="">'+n+"<\/h3>";o+="<\/div>";o+='<div class="modal-body"><a href="#" class="modalCloseButton closeModal icon icon-x"><\/a>';o+=t;o+="<\/div>";o+='<div class="modal-footer">';o+=IsUndefinedOrNull(i)?'<button type="button" class="btn btn-inverse closeModal">Close<\/button>':i;o+="<\/div>";o+="<\/div>";$.colorbox({className:r,html:o,onComplete:function(){$.isFunction(f)&&f.call(this)},onClosed:function(){$.isFunction(e)&&e.call(this)}})}function public_initContactFormBtns(){$("body").on("click touchstart",".contactFormBtn",function(n){n.preventDefault();var t=$(this).data(),r=t.heading||"contact us",u=t.subject,f=t.message,i=t.isdev,e='<button class="btn closeModal btn-inverse">Cancel<\/button>',o='<button id="submitBtnContactModal" type="button" class="btn icon icon-paper-plane btn-info">Send<\/button>';public_getJsonResult("Contact","ContactForm",{},function(n){if(n.IsValid){public_modal(r,n.Data,o+e,"modalInfo","icon-mail");$("input#Subject").val(u);$("textarea#Message").val(f);i&&(i==!0||i=="true")&&$("#IsBugReport").val("true");$("#submitBtnContactModal").on("click touchstart",function(){$("#contactForm").trigger("submit")});contactForm_validate(function(){switch(t.contacttype){case"showing":_gaq.push(["_trackEvent","Lead","Form","Schedule showing"]);break;case"propertyinfo":_gaq.push(["_trackEvent","Lead","Form","Request property info"]);break;case"neighborhoodinfo":_gaq.push(["_trackEvent","Lead","Form","Request neighborhood info"]);break;case"agentjoin":_gaq.push(["_trackEvent","Lead","Form","Join porchlight"]);break;default:_gaq.push(["_trackEvent","Lead","Form","General contact"])}},t.additionalmessage)}})})}function contactForm_validate(n,t){$LAB.script(window.PorchLight.ModulePaths.Validity).wait(function(){$("#contactForm").validateForm({loadingText:"Sending...",outputMode:"summary",submitBtn:$("#submitBtnContactModal"),isValid:function(){var i=$("#contactForm").find("input, textarea, select"),r,u;IsUndefinedOrNull(t)||(r=$("textarea#Message").val(),i.filter("#Message").val(r+decodeURIComponent(t)));u=i.serialize();i.prop("disabled",!0);public_getJsonResult("Contact","Send",u,function(t){t.IsValid?($.isFunction(n)&&n(),public_modal("message sent","Thank you! Your message has been sent.",null,"modalSuccess","icon-checkmark")):(i.prop("disabled",!1),$("#contactForm").prepend('<div class="alert alert-error icon icon-warning">Error sending message. Please try again<\/div>'))})}})})}function public_initSharetns(){$("body").on("click touchstart",".shareBtn",function(n){function t(){Socialite.load($("#shareWrap")[0])}n.preventDefault();var i=$(this).data(),r=$(this).siblings(".dropdown-menu");public_getJsonResult("Contact","ShareButtons",i,function(n){n.IsValid&&(r.html(n.Data),window.Socialite?t():$LAB.script(window.PorchLight.ModulePaths.Socialite).wait(t))})})}function public_initFavoriteBtns(){$("body").on("click touchstart",".favoriteBtn",function(n){n.preventDefault();var t=$(this),i=t.data("retsid");public_checkLoggedIn(function(){t.hasClass("favChecked")?public_getJsonResult("Property","UnMarkAsFavorite",{retsPropertyIDs:[i],rating:3},function(n){n.IsValid&&(t.removeClass("favChecked").attr("data-original-title","Save favorite"),t.hasClass("btn")&&t.removeClass("icon-heart").addClass("icon-heart-2"))}):public_getJsonResult("Property","MarkAsFavorite",{retsPropertyIDs:[i],rating:3},function(n){n.IsValid&&(t.addClass("favChecked").attr("data-original-title","Remove favorite"),t.hasClass("btn")&&t.removeClass("icon-heart-2").addClass("icon-heart"),_gaq.push(["_trackEvent","Account","Saved","Favorite property"]))})})})}function public_checkLoggedIn(n){var t=window.PorchLight.CurrentUser.isLoggedIn;t?n():(window.PorchLight.CurrentUser.PendingAction=n,public_modalSignIn())}function public_ajaxFormSubmit(n,t,i,r){var u=$(i);public_getJsonResult(n,t,u.serialize(),function(n){u.find(".btn-loading").loadbutton("done");u.find(".validation-summary-errors").remove();n.IsValid?n.RedirectTo!=null&&n.RedirectTo.length>0?window.location.href=n.RedirectTo:$.isFunction(r)&&r(n):public_renderModelStateErrors(i,n.ModelState)},null,null,null,"json")}function public_renderModelStateErrors(n,t){var e=$(n),i,r,f,u,o;if(e.length){if(i='<div class="validation-summary-errors alert alert-error" data-valmsg-summary="true"><span>Please correct the following errors<\/span><ul>',t&&t.Items&&t.Items.length>0)for(r=0;r<t.Items.length;r++)for(f=t.Items[r],u=0;u<f.Errors.length;u++)o=f.Errors[u],i+="<li>"+o+"<\/li>";i+="<\/ul><\/div>";e.prepend(i);$("#colorbox").length&&$.colorbox.resize()}}function public_refreshAccountMenu(){$.post("/Account/GetAccountMenu",null,function(n){$("#signInContainer").html(n)})}function public_signOut(){public_getJsonResult("Account","SignOut",{},function(n){n.IsValid?(window.PorchLight.CurrentUser.isLoggedIn=!1,public_refreshAccountMenu(),public_modal("signed out","You have been signed out of your account. See you next time!",null,"modalSuccess",null,null,function(){$.inArray(window.location.pathname,window.PorchLight.RestrictedPaths)!==-1&&public_navigate(null,"Denver Real Estate - Buy / Sell Your Colorado Home - PorchLight Group","/",!1)}),$(".favChecked").removeClass("favChecked"),_gaq.push(["_trackEvent","Account","Sign out","Sign out"])):public_modal("error","Error signing out. Please try again.",null,"modalError")})}function public_modalSignIn(){function n(){var n=$("#signInForm:eq(0)");n.validateForm({loadingText:"Signing in...",isValid:function(){public_ajaxFormSubmit("Account","SignIn",this,function(){public_modal("welcome back!","You have been signed in.",null,"modalSuccess");window.PorchLight.CurrentUser.isLoggedIn=!0;public_refreshAccountMenu();window.PorchLight.CurrentUser.PendingAction&&$.isFunction(window.PorchLight.CurrentUser.PendingAction)&&window.PorchLight.CurrentUser.PendingAction();_gaq.push(["_trackEvent","Account","Sign in","Sign in"])})}})}$.colorbox();public_getJsonResult("Account","SignInForm",{},function(t){if(t.IsValid){var i='<div class="row-fluid signupWrap">'+t.Data+"<\/div>";public_modal("",i,"","modalSignIn",null,function(){$LAB.script(window.PorchLight.ModulePaths.Validity).wait(n)})}else $.colobox.close()},null,null,null,"html")}function public_modalRegister(){function n(){var n=$("#accountForm:eq(0)");n.validateForm({loadingText:"Registering...",submitBtn:$("#registerSubmit"),isValid:function(){public_ajaxFormSubmit("Account","Register",this,function(){var n='<a href="#" class="btn btn-success closeModal">Continue what you were doing &raquo;<\/a>';n+='<button id="welcomeFeatures" type="button" class="btn btn-inverse">Explore new features &raquo;<\/button>';public_modal("welcome to PorchLight!","You can either continue what you were doing, or check out a few of the awesome things you can do with your shiny new account",n,"modalSuccess",null,function(){$("#welcomeFeatures").on("click",function(n){n.preventDefault();$.get("/Account/WelcomePartial",null,function(n){public_modal("features",n,null,"modalInfo",null,function(){$.colorbox.resize()},function(){window.PorchLight.CurrentUser.PendingAction&&$.isFunction(window.PorchLight.CurrentUser.PendingAction)&&window.PorchLight.CurrentUser.PendingAction()})})})},function(){window.PorchLight.CurrentUser.PendingAction&&$.isFunction(window.PorchLight.CurrentUser.PendingAction)&&window.PorchLight.CurrentUser.PendingAction()});window.PorchLight.CurrentUser.isLoggedIn=!0;public_refreshAccountMenu();_gaq.push(["_trackEvent","Lead","Register","New account creation"])})}});$("#readPolicy").on("click touchstart",function(n){return n.preventDefault(),n.stopPropagation(),window.open($(this).attr("href"),"Privacy Policy | Porchlight Real Estate Group","height=400,width=500"),!1})}$.colorbox();public_getJsonResult("Account","RegisterForm",{},function(t){if(t.IsValid){var i='<div class="row-fluid signupWrap">'+t.Data+"<\/div>";public_modal("",i,"","modalSignIn",null,function(){$LAB.script(window.PorchLight.ModulePaths.Validity).wait(n)})}else $.colobox.close()},null,null,null,"html")}function public_initAccountButtons(){$("body").on("click",".accountBtn",function(n){n.preventDefault();var t=$(this);switch(t.data("action")){case"signin":public_modalSignIn();break;case"signout":public_signOut();break;case"register":public_modalRegister()}})}function checkCurrencyInput(){var n=$(this),t=n.val();n.val(formatCurrency(t))}function formatCurrency(n){var t=parseInt(n.toString().replace(/[^\d.]/g,""),10);return isNaN(t)?"":(t<1e4&&(t=t*1e3),numberWithCommas(t))}function formatShortPrice(n){return n>=1e6?(n/1e6).toFixed(1)+"m":n>=1e3?Math.round((n/1e3).toFixed(1))+"k":n<1e3||n==0?n:void 0}function public_getQuickCount(n){var i=$("#quickResultCount"),t;i.html("&nbsp;").addClass("quickLoading");$("#PP").remove();t=public_sanitizeSearch("#searchForm");$.extend(t,{PiR:1,PiS:0});public_quickCountXHR&&public_quickCountXHR.readyState!=4&&public_quickCountXHR.abort();public_quickCountXHR=public_getJsonResult("Property","GetSearch",t,function(t){var r=numberWithCommas(t.Data.Count);i.removeClass("quickLoading").text(r);window.PorchLight.QuickResultData={count:r,queryString:t.CanonicalUrl};$.isFunction(n)&&n()})}function public_sanitizeSearch(n){var t=$("input.currency"),i;return $.each(t,function(){var n=$(this);n.val(n.val().replace(/[^\d.]/g,""))}),i=$(n).serializeObject(),t.each(checkCurrencyInput),i}function public_bindFancySearchFormEvents(){$("input.currency").each(checkCurrencyInput).on("change",checkCurrencyInput);var n=$("#Pt");$("#searchForm").on("change","input.searchType",function(){var i=$("#Pt_Houses").prop("checked"),r=$("#Pt_Condos").prop("checked"),t=0;i&&!r?t=1:!i&&r?t=2:$("input.searchType").prop("checked",!0);n.val(t)}).on("change",'input:not(".areaCbox"), select, textarea',function(){public_getQuickCount()});$("#chooseAreaButton").on("click touchstart",public_neighborhoodPicker);window.PorchLight.SelectedAreaShortGUIDString&&window.PorchLight.SelectedAreaShortGUIDString!==""&&(window.PorchLight.SelectedAreaShortGUIDs=[],$.each(window.PorchLight.SelectedAreaShortGUIDString.split(","),function(n,t){window.PorchLight.SelectedAreaShortGUIDs.push(t)}));$(".areaShortGUIDs").on("selectedAreasUpdated",function(){window.PorchLight.SelectedAreaShortGUIDs&&$(this).val(window.PorchLight.SelectedAreaShortGUIDs).trigger("change");window.PorchLight.SelectedAreaBagesHTML&&$("#searchFormAreasList").html(window.PorchLight.SelectedAreaBagesHTML)});$("#searchFormAreasList").on("click touchstart",".removeBadge",function(n){n.preventDefault();n.stopPropagation();var t=$(this).parent(),i=t.data("shortguid"),r=$.inArray(i,window.PorchLight.SelectedAreaShortGUIDs);window.PorchLight.SelectedAreaShortGUIDs.splice(r,1);$('.areaCbox[data-shortguid="'+i+'"]').click();t.remove();$(".areaShortGUIDs").val(window.PorchLight.SelectedAreaShortGUIDs).trigger("change")})}function public_syncSelectedAreas(){var n,t;if(window.PorchLight.SelectedAreaShortGUIDs&&window.PorchLight.SelectedAreaShortGUIDs.length)for(n=0;n<window.PorchLight.SelectedAreaShortGUIDs.length;n++)t=$('.areaCbox[data-shortguid="'+window.PorchLight.SelectedAreaShortGUIDs[n]+'"]'),t.prop("checked")==!1&&t.click()}function public_neighborhoodPicker(n){var i,t;if(n.preventDefault(),n.stopPropagation(),i=$(this),$("#chooseAreaDropdownWrap").toggleClass("open"),window.PorchLight.AreaPickerLoaded){$("#chooseAreaDropdownWrap").hasClass("open")&&public_syncSelectedAreas();return}t=i.siblings(".dropdown-menu");public_getJsonResult("GeoArea","GetGeoAreas",{},function(n){$LAB.script(window.PorchLight.ModulePaths.GoogleMap).script(window.PorchLight.ModulePaths.GeoMap).wait(function(){t.html(n.Data);t.on("click",function(n){n.stopPropagation()});public_initAreaPicker();window.PorchLight.AreaPickerLoaded=!0})},null,null,null,"html")}function public_initAreaPicker(){$("#areaPickerMap").geoMap({enableHeatmap:!1,gmapOptions:{scrollwheelEnabled:!0},onPolygonClick:function(){$("#area_"+this.geoAreaData.urlid).click()}});$("#searchAreas").typeahead({source:window.PorchLight.AreaTitles,updater:function(n){var t=$.inArray(n,window.PorchLight.AreaTitles),i=window.PorchLight.AreaUrlIDs[t];$("#area_"+i).prop("checked",!0).trigger("change")}});var n=$("#outputTagsList");$("#areaPickerControls").on("change",".areaCbox",function(){var t=$(this),u=t.data("title"),i=t.attr("value"),r;t.prop("checked")?(t.parent().addClass("selectedArea"),window.PorchLight.SelectedAreaIDs.push(t.attr("value")),n.append('<span class="badge badge-error badge_'+i+'" data-shortguid="'+t.data("shortguid")+'">'+u+' <a href="#" class="icon icon-x removeBadge" data-urlid="'+i+'"><\/a><\/span> ')):(t.parent().removeClass("selectedArea"),r=$.inArray(i,window.PorchLight.SelectedAreaIDs),window.PorchLight.SelectedAreaIDs.splice(r,1),$(".badge_"+i).remove());$("#areaPickerMap").geoMap("selectGeoAreasByID",window.PorchLight.SelectedAreaIDs)});n.on("click",".removeBadge",function(n){n.preventDefault();var t=$(this).data("urlid");$("#area_"+t).prop("checked",!1).trigger("change")});public_initCityTabs();$("#saveAreasButton").on("click touchstart",function(n){n.stopPropagation();window.PorchLight.SelectedAreaShortGUIDs=[];$(".areaCbox:checked").each(function(){window.PorchLight.SelectedAreaShortGUIDs.push($(this).data("shortguid"))});window.PorchLight.SelectedAreaBagesHTML=$("#outputTagsList").html();$(".areaShortGUIDs").trigger("selectedAreasUpdated");$("#chooseAreaDropdownWrap").removeClass("open")});$("#closeDropdown").on("click touchstart",function(){$("#chooseAreaDropdownWrap").removeClass("open")});public_syncSelectedAreas()}function public_initCityTabs(){var t=$("#citiesList"),n=$("#neighborhoodsList");t.on("click touchstart",".chooseCity",function(i){var r,f,u,e;i.preventDefault();r=$(this);r.hasClass("currentArea")||(f=r.data("urlid"),$("#noHoods").remove(),t.find(".currentArea").removeClass("currentArea"),r.addClass("currentArea"),n.find("li").hide(),u=n.find('li[data-parenturlid="'+f+'"]'),u.show(),u.length<=0&&n.find("ul").prepend('<li style="padding:10px;font-style:italic;" id="noHoods">No neighborhoods found in this city<\/li>'),e=r.data("title"),$("#hoodsLabel").text(e))})}function public_bindMoblieEvents(){$("#mainMenuBtn").on("click touchstart",function(n){n.preventDefault();$("#mainHeader").toggleClass("mobileMenuOpen")});if(navigator.userAgent.toLowerCase().indexOf("android")>-1)$("body").on("touchstart","a, button",function(){$(this).addClass("mobile-active")}).on("touchend touchcancel","a, button",function(){$(this).removeClass("mobile-active")})}function public_initDynamicVideos(){$(".loadVideo").on("click",function(n){n.preventDefault();var t=$(this).data("iframedata")})}var public_navigate,public_quickCountXHR;window.PorchLight.PopStateReady=!1;public_navigate=null,function(n){var t=n.jQuery,i=n.document;if(!Modernizr.history)return public_navigate=function(t,i,r){n.location.href=r},!1;t(function(){var r=t("#mainContent").filter(":first"),a=r.get(0),e="activeNav",h=".activeNav",o=t(".navLink"),c="statechangecomplete",l=t(n),u=t(i.body),s=t("#loadOverlay"),f=getRootUrl();public_replaceState(i.title,i.location.toString());r.length===0&&(r=u);t.expr[":"].internal=function(n){var r=t(n),i=r.attr("href")||"";return i.substring(0,f.length)===f||i.indexOf(":")===-1};t.fn.ajaxify=function(){var n=t(this);n.on("click",'a:internal:not(.no-ajaxy,[href^="#"])',function(n){if(!n.ctrlKey){var i=t(this),r=i.attr("href"),f=i.attr("title")||null;return n.which==2||n.metaKey?!0:(public_navigate(null,f,r,!1),u.trigger("click"),n.preventDefault(),!1)}});return n};u.ajaxify();n.onpopstate=function(t){if(n.PorchLight.PopStateReady&&t.state&&t.state!==null){var i=t.state;public_navigate(i,null,t.state.newurl,!0)}};public_navigate=function(a,v,y,p){var g=y.replace(f,""),w,k,d,tt,nt,b;path=g.split("/");controllerName=IsUndefinedOrNull(path[0])||path[0]==""?"home":path[0].toLowerCase();actionName=IsUndefinedOrNull(path[1])||path[1]==""?"index":path[0].toLowerCase();t.colorbox.close();t("#primaryNav").removeClass("dropMenuOpen");n.PorchLight.AreaPickerLoaded=!1;public_clearValidationTooltips();t("body,html").scrollTop(0);t("#mainHeader").removeClass("mobileMenuOpen");s.fadeIn(350,"easeOutExpo");w={};typeof w=="string"?(d=w,k="application/x-www-form-urlencoded"):(d=JSON.stringify(w),k="application/json; charset=utf-8");nt=tt||"html";b={};"abort"in b&&b.abort();b=t.ajax({url:y,headers:{JsonDataType:nt},type:"POST",data:d,dataType:"json",contentType:k,success:function(f){if(o.filter(h).removeClass(e),f.Data==="")return public_modal("error","Sorry, something went wrong on our end! Please try again. ",null,"modalError"),!1;p||public_pushState(v,y);r.stop(!0,!0);r.html(f.Data);n.PorchLight.ScriptQueue!==null&&(n.PorchLight.ScriptQueue.runQueue(),n.PorchLight.ScriptQueue=null);n.location.hash&&t(n.location.hash).ScrollTo();i.title=n.PorchLight.PageTitle;n.PorchLight.ActiveController&&(o.filter("."+n.PorchLight.ActiveController+"Controller").addClass(e),u.removeClass().addClass("activeController_"+n.PorchLight.ActiveController));n.PorchLight.ActiveAction&&n.PorchLight.ActiveAction!==""&&(u.addClass("activeAction_"+n.PorchLight.ActiveAction),n.PorchLight.ActiveAction="");l.trigger(c);typeof n._gaq!="undefined"&&n._gaq.push(["_trackPageview",g])},complete:function(){s.stop().fadeOut(200,"easeOutExpo")},statusCode:{404:function(){public_modal("page not found","Uh oh, looks like we made a wrong turn! That page doesn't exist. <br /><pre>HTTP 404 Error<\/pre>",null,"modalWarning")},500:function(){public_modal("server error","Sorry, something went wrong on our end! Please try again soon. <br /><pre>HTTP 500 Error<\/pre>",null,"modalError")}},error:function(){return!1}})}})}(window);public_quickCountXHR=null;window.PorchLight.AreaPickerLoaded=!1;